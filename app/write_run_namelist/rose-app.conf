[command]
default = cp ${GRID_NAME}_run.nml ${ROSE_DATAC}; mkdir -p ${ROSE_DATAC}/output

[file:${GRID_NAME}_run.nml]
source = namelist:NML_CASE namelist:NML_STARTUP namelist:NML_IO namelist:NML_INTEGRATION namelist:NML_RESTART namelist:NML_NETCDF namelist:NML_NETCDF_AV namelist:NML_SURFACE_FORCING namelist:NML_HEATING_CALCULATED namelist:NML_PHYSICS namelist:NML_RIVER_TYPE namelist:NML_OPEN_BOUNDARY_CONTROL namelist:NML_GRID_COORDINATES namelist:NML_GROUNDWATER namelist:NML_LAG namelist:NML_ADDITIONAL_MODELS namelist:NML_PROBES namelist:NML_STATION_TIMESERIES namelist:NML_FABM namelist:NML_NESTING namelist:NML_NCNEST namelist:NML_NCNEST_WAVE namelist:NML_BOUNDSCHK namelist:NML_DYE_RELEASE namelist:NML_PWP namelist:NML_SST_ASSIMILATION namelist:NML_SSTGRD_ASSIMILATION namelist:NML_SSHGRD_ASSIMILATION namelist:NML_TSGRD_ASSIMILATION namelist:NML_CUR_NGASSIMILATION namelist:NML_CUR_OIASSIMILATION namelist:NML_TS_NGASSIMILATION namelist:NML_TS_OIASSIMILATION

[namelist:NML_CASE]
CASE_TITLE  = '${GRID_NAME} FVCOM ver4.0 with Nesting, wind'
TIMEZONE  = 'UTC'
DATE_FORMAT  = 'YMD'
DATE_REFERENCE  = 'default'
START_DATE  = '${START_DATE}'
END_DATE  = '${END_DATE}'

[namelist:NML_STARTUP]
STARTUP_TYPE      = 'hotstart'
STARTUP_FILE      = '${GRID_NAME}_restart_0001.nc'
STARTUP_UV_TYPE   = 'set values'
STARTUP_TURB_TYPE = 'set values'
STARTUP_TS_TYPE   = 'set values'
STARTUP_T_VALS  = 15.00
STARTUP_S_VALS  = 35.00
STARTUP_U_VALS  =  0.00
STARTUP_V_VALS  =  0.00
STARTUP_DMAX  = ${STARTUP_DMAX}

[namelist:NML_IO]
INPUT_DIR  = '${ROSE_DATAC}/'
OUTPUT_DIR      = '${ROSE_DATAC}/output/'
IREPORT  = 1440
VISIT_ALL_VARS  = F
WAIT_FOR_VISIT  = F
USE_MPI_IO_MODE  = F

[namelist:NML_INTEGRATION]
EXTSTEP_SECONDS  =  ${EXT_TSTEP}
ISPLIT  = ${ISPLIT}
IRAMP  = 115200
MIN_DEPTH  =  0.20
STATIC_SSH_ADJ  =  0.00

[namelist:NML_RESTART]
RST_ON  = T
RST_FIRST_OUT  = '${START_DATE}'
RST_OUT_INTERVAL  = 'seconds = 86400.'
RST_OUTPUT_STACK  = 0

[namelist:NML_NETCDF]
NC_ON = T
NC_FIRST_OUT = '${START_DATE}'
NC_OUT_INTERVAL = '${NC_INTERVAL}'
NC_OUTPUT_STACK = 0
NC_SUBDOMAIN_FILES = 'FVCOM'
NC_GRID_METRICS = T
NC_FILE_DATE = T
NC_VELOCITY = ${VELOCITY_OUT}
NC_SALT_TEMP = ${SALT_TEMP_OUT}
NC_TURBULENCE = ${TURBULENCE_OUT}
NC_AVERAGE_VEL = ${VELOCITY_OUT}
NC_VERTICAL_VEL = ${VELOCITY_OUT}
NC_WIND_VEL = ${WIND_OUT}
NC_WIND_STRESS = ${WIND_OUT}
NC_EVAP_PRECIP = ${HEAT_RAIN_OUT}
NC_SURFACE_HEAT = ${HEAT_RAIN_OUT}
NC_GROUNDWATER = ${HEAT_RAIN_OUT}
NC_BIO = F
NC_WQM = F
NC_VORTICITY = ${TURBULENCE_OUT}

[namelist:NML_NETCDF_AV]
NCAV_ON  = ${NC_AV_ON}
NCAV_FIRST_OUT  = '${START_DATE}'
NCAV_OUT_INTERVAL  = '${NC_AV_INTERVAL}'
NCAV_OUTPUT_STACK  = 0
NCAV_GRID_METRICS  = F
NCAV_FILE_DATE  = T
NCAV_VELOCITY  = ${VELOCITY_OUT}
NCAV_SALT_TEMP  = ${SALT_TEMP_OUT}
NCAV_TURBULENCE  = ${TURBULENCE_OUT}
NCAV_AVERAGE_VEL  = ${VELOCITY_OUT}
NCAV_VERTICAL_VEL  = ${VELOCITY_OUT}
NCAV_WIND_VEL  = ${WIND_OUT}
NCAV_WIND_STRESS  = ${WIND_OUT}
NCAV_EVAP_PRECIP  = ${HEAT_RAIN_OUT}
NCAV_SURFACE_HEAT  = ${HEAT_RAIN_OUT}
NCAV_GROUNDWATER  = ${HEAT_RAIN_OUT}
NCAV_BIO  = F
NCAV_WQM  = F
NCAV_VORTICITY  = ${TURBULENCE_OUT}

[namelist:NML_SURFACE_FORCING]
WIND_ON  = ${WIND_ON}
WIND_TYPE  = 'speed'
WIND_FILE  = '${GRID_NAME}_wnd.nc'
WIND_KIND  = 'variable'
WIND_X  =  1.00
WIND_Y  =  1.00
HEATING_ON  = ${HEATING_ON}
HEATING_TYPE  = 'flux'
HEATING_KIND  = 'variable'
HEATING_FILE  = '${GRID_NAME}_wnd.nc'
HEATING_LONGWAVE_LENGTHSCALE  =  0.70
HEATING_LONGWAVE_PERCTAGE  = 10.00
HEATING_SHORTWAVE_LENGTHSCALE  =  1.10
HEATING_RADIATION  =   0.00
HEATING_NETFLUX  =   0.00
PRECIPITATION_ON  = ${PRECIPITATION_ON}
PRECIPITATION_KIND  = 'variable'
PRECIPITATION_FILE  = '${GRID_NAME}_wnd.nc'
PRECIPITATION_PRC  =   0.00
PRECIPITATION_EVP  =   0.00
AIRPRESSURE_ON  = ${AIR_PRESSURE_ON}
AIRPRESSURE_KIND  = 'variable'
AIRPRESSURE_FILE  = '${GRID_NAME}_wnd.nc'
AIRPRESSURE_VALUE  =       0.00
WAVE_ON  = F
WAVE_FILE  = '${GRID_NAME}_wav.nc'
WAVE_KIND  = 'constant'
WAVE_HEIGHT  =  0.00
WAVE_LENGTH  =  0.00
WAVE_DIRECTION  =  0.00
WAVE_PERIOD  =  0.00
WAVE_PER_BOT  =  0.00
WAVE_UB_BOT  =  0.00

[namelist:NML_HEATING_CALCULATED]
HEATING_CALCULATE_ON  = F
HEATING_CALCULATE_TYPE  = 'flux'
HEATING_CALCULATE_FILE  = ''
HEATING_CALCULATE_KIND  = 'variable'
ZUU  = 10.00
ZTT  = 10.00
ZQQ  = 10.00
AIR_TEMPERATURE  =  0.00
RELATIVE_HUMIDITY  =  0.00
SURFACE_PRESSURE  =  0.00
LONGWAVE_RADIATION  =   0.00
SHORTWAVE_RADIATION  =   0.00
HEATING_LONGWAVE_PERCTAGE_IN_HEATFLUX  =  0.78
HEATING_LONGWAVE_LENGTHSCALE_IN_HEATFLUX  =  1.40
HEATING_SHORTWAVE_LENGTHSCALE_IN_HEATFLUX  =  6.30

[namelist:NML_PHYSICS]
HORIZONTAL_MIXING_TYPE  = 'closure'
HORIZONTAL_MIXING_KIND  = 'constant'
HORIZONTAL_MIXING_COEFFICIENT = ${HORIZONTAL_MIXING_COEFFICIENT}
HORIZONTAL_PRANDTL_NUMBER  =  1.00
VERTICAL_MIXING_TYPE  = 'closure'
VERTICAL_MIXING_COEFFICIENT  = ${VERTICAL_MIXING_COEFFICIENT}
VERTICAL_PRANDTL_NUMBER  =  1.00
BOTTOM_ROUGHNESS_MINIMUM  = 2.500000e-03
BOTTOM_ROUGHNESS_LENGTHSCALE  = -1.00
BOTTOM_ROUGHNESS_KIND  = 'static'
BOTTOM_ROUGHNESS_TYPE  = 'orig'
BOTTOM_ROUGHNESS_FILE  = '${GRID_NAME}_z0.nc'
CONVECTIVE_OVERTURNING  = F
SCALAR_POSITIVITY_CONTROL  = T
BAROTROPIC  = F
BAROCLINIC_PRESSURE_GRADIENT  = 'sigma levels'
SEA_WATER_DENSITY_FUNCTION  = 'dens2'
RECALCULATE_RHO_MEAN  = F
INTERVAL_RHO_MEAN  = 'days=1.0'
TEMPERATURE_ACTIVE  = ${TEMP_ACTIVE} 
SALINITY_ACTIVE  = ${SALT_ACTIVE}
SURFACE_WAVE_MIXING  = F
WETTING_DRYING_ON  = T
NOFLUX_BOT_CONDITION  = F
ADCOR_ON  = T
EQUATOR_BETA_PLANE  = F
BACKWARD_ADVECTION  = F
BACKWARD_STEP  = 1

[namelist:NML_RIVER_TYPE]
RIVER_NUMBER  = 0
RIVER_KIND  = 'variable'
RIVER_TS_SETTING  = ${RIVER_TS_SETTING}
RIVER_INFLOW_LOCATION  = 'node'
RIVER_INFO_FILE  = '${GRID_NAME}_riv.nml'

[namelist:NML_OPEN_BOUNDARY_CONTROL]
OBC_ON  = ${OBC_ON}
OBC_NODE_LIST_FILE  = '${GRID_NAME}_obc.dat'
OBC_ELEVATION_FORCING_ON  = ${ELEV_FORCE}
OBC_ELEVATION_FILE  = '${GRID_NAME}_elevtide.nc'
OBC_TS_TYPE  = 1
OBC_TEMP_NUDGING  = F
OBC_TEMP_FILE  = '${GRID_NAME}_tsobc.nc'
OBC_TEMP_NUDGING_TIMESCALE  =    0.2000000000
OBC_SALT_NUDGING  = F
OBC_SALT_FILE  = '${GRID_NAME}_tsobc.nc'
OBC_SALT_NUDGING_TIMESCALE  =    0.2000000000
OBC_MEANFLOW  = F
OBC_MEANFLOW_FILE  = '${GRID_NAME}_meanflow.nc'
OBC_TIDEOUT_INITIAL  = 1
OBC_TIDEOUT_INTERVAL  = 900
OBC_LONGSHORE_FLOW_ON  = F
OBC_LONGSHORE_FLOW_FILE  = '${GRID_NAME}_lsf.dat'

[namelist:NML_GRID_COORDINATES]
GRID_FILE  = '${GRID_NAME}_grd.dat'
GRID_FILE_UNITS  = 'meters'
PROJECTION_REFERENCE  = 'proj=utm +ellps=WGS84 +zone=30'
SIGMA_LEVELS_FILE  = 'sigma_gen.dat'
DEPTH_FILE  = '${GRID_NAME}_dep.dat'
CORIOLIS_FILE  = '${GRID_NAME}_cor.dat'
SPONGE_FILE  = '${GRID_NAME}_spg.dat'

[namelist:NML_GROUNDWATER]
GROUNDWATER_ON  = F
GROUNDWATER_TEMP_ON  = F
GROUNDWATER_SALT_ON  = F
GROUNDWATER_KIND  = 'none'
GROUNDWATER_FILE  = 'none'
GROUNDWATER_FLOW  =   0.000000
GROUNDWATER_TEMP  =   0.000000
GROUNDWATER_SALT  =   0.000000

[namelist:NML_LAG]
LAG_PARTICLES_ON  = F
LAG_START_FILE  = 'lag_init.nc'
LAG_OUT_FILE  = 'lag_out.nc'
LAG_FIRST_OUT  = 'cycle=0'
LAG_RESTART_FILE  = 'junk.nc'
LAG_OUT_INTERVAL  = 'cycle=30'
LAG_SCAL_CHOICE  = 'none'

[namelist:NML_ADDITIONAL_MODELS]
DATA_ASSIMILATION  = F
DATA_ASSIMILATION_FILE  = '${GRID_NAME}_run.nml'
BIOLOGICAL_MODEL  = F
STARTUP_BIO_TYPE  = 'observed'
SEDIMENT_MODEL          = F
SEDIMENT_MODEL_FILE  = 'cstms_sediment.inp'
SEDIMENT_PARAMETER_TYPE  = 'uniform'
SEDIMENT_PARAMETER_FILE  = 'flume_v02_sediments.nc'
BEDFLAG_TYPE            = 'constant'
BEDFLAG_FILE            = 'flume_v02_bedflag.nc'
ICING_MODEL  = F
ICING_FORCING_FILE  = 'none'
ICING_FORCING_KIND  = 'none'
ICING_AIR_TEMP  =   0.000000
ICING_WSPD  =   0.000000
ICE_MODEL  = F
ICE_FORCING_FILE  = 'none'
ICE_FORCING_KIND  = 'none'
ICE_SEA_LEVEL_PRESSURE  =   0.000000
ICE_AIR_TEMP  =   0.000000
ICE_SPEC_HUMIDITY  =   0.000000
ICE_SHORTWAVE  =   0.000000
ICE_CLOUD_COVER  =   0.000000

[namelist:NML_PROBES]
PROBES_ON  = F
PROBES_NUMBER  = 40
PROBES_FILE  = '${GRID_NAME}_probes.nml'

[namelist:NML_STATION_TIMESERIES]
OUT_STATION_TIMESERIES_ON  = F
STATION_FILE  = '${GRID_NAME}_station.dat'
LOCATION_TYPE  = 'node'
OUT_ELEVATION  = F
OUT_VELOCITY_3D  = F
OUT_VELOCITY_2D  = F
OUT_WIND_VELOCITY  = F
OUT_SALT_TEMP  = F
OUT_INTERVAL  = 'seconds= 360.0'

[namelist:NML_FABM]
STARTUP_FABM_TYPE  = 'set values'
USE_FABM_BOTTOM_THICKNESS  = F
USE_FABM_SALINITY  = F
FABM_DEBUG  = F
FABM_DIAG_OUT  = F

[namelist:NML_NESTING]
NESTING_ON  = ${NEST_ON}
NESTING_BLOCKSIZE  = 10
NESTING_TYPE  = ${NEST_TYPE}
NESTING_FILE_NAME  = '${GRID_NAME}_nest_0001.nc'

[namelist:NML_NCNEST]
NCNEST_ON  = F
NCNEST_BLOCKSIZE  = 10
NCNEST_NODE_FILES  = '${GRID_NAME}_nodes.dat'
NCNEST_OUT_INTERVAL  = 'seconds=900.0'

[namelist:NML_NCNEST_WAVE]
NCNEST_ON_WAVE  = F
NCNEST_TYPE_WAVE  = 'spectral density'
NCNEST_BLOCKSIZE_WAVE  = -1
NCNEST_NODE_FILES_WAVE  = 'none'

[namelist:NML_BOUNDSCHK]
BOUNDSCHK_ON  = F
CHK_INTERVAL  = 1
VELOC_MAG_MAX  =  6.50
ZETA_MAG_MAX  = 10.00
TEMP_MAX  = 30.00
TEMP_MIN  = -4.00
SALT_MAX  = 40.00
SALT_MIN  = -0.50

[namelist:NML_DYE_RELEASE]
DYE_ON  = F
DYE_RELEASE_START  = '2046-02-01 00:00:00'
DYE_RELEASE_STOP  = '2046-03-01 00:00:00'
KSPE_DYE  = 1
MSPE_DYE  = 1
K_SPECIFY  = 1
M_SPECIFY  = 8187
DYE_SOURCE_TERM  =    4500.00

[namelist:NML_PWP]
UPPER_DEPTH_LIMIT  = 20.00
LOWER_DEPTH_LIMIT  = 200.00
VERTICAL_RESOLUTION  =  1.00
BULK_RICHARDSON  =  0.65
GRADIENT_RICHARDSON  =  0.25

[namelist:NML_SST_ASSIMILATION]
SST_ASSIM  = F
SST_ASSIM_FILE  = '${GRID_NAME}_sst.nc'
SST_RADIUS  =     0.000000
SST_WEIGHT_MAX  = 1.00000
SST_TIMESCALE  =     0.000000
SST_TIME_WINDOW  =     0.000000
SST_N_PER_INTERVAL  = 0

[namelist:NML_SSTGRD_ASSIMILATION]
SSTGRD_ASSIM  = F
SSTGRD_ASSIM_FILE  = '${GRID_NAME}_sstgrd.nc'
SSTGRD_WEIGHT_MAX  =     0.400000
SSTGRD_TIMESCALE  =     0.000100
SSTGRD_TIME_WINDOW  =     1.000000
SSTGRD_N_PER_INTERVAL  = 24

[namelist:NML_SSHGRD_ASSIMILATION]
SSHGRD_ASSIM  = F
SSHGRD_ASSIM_FILE  = '${GRID_NAME}_sshgrd.nc'
SSHGRD_WEIGHT_MAX  =     0.000000
SSHGRD_TIMESCALE  =     0.000000
SSHGRD_TIME_WINDOW  =     0.000000
SSHGRD_N_PER_INTERVAL  = 0

[namelist:NML_TSGRD_ASSIMILATION]
TSGRD_ASSIM  = F
TSGRD_ASSIM_FILE  = '${GRID_NAME}_tsgrd.nc'
TSGRD_WEIGHT_MAX  =     0.000000
TSGRD_TIMESCALE  =     0.000000
TSGRD_TIME_WINDOW  =     0.000000
TSGRD_N_PER_INTERVAL  = 0

[namelist:NML_CUR_NGASSIMILATION]
CUR_NGASSIM  = F
CUR_NGASSIM_FILE  = '${GRID_NAME}_cur.nc'
CUR_NG_RADIUS  =     0.000000
CUR_GAMA  =     0.000000
CUR_GALPHA  =     0.000000
CUR_NG_ASTIME_WINDOW  =     0.000000

[namelist:NML_CUR_OIASSIMILATION]
CUR_OIASSIM  = F
CUR_OIASSIM_FILE  = '${GRID_NAME}_curoi.nc'
CUR_OI_RADIUS  =     0.000000
CUR_OIGALPHA  =     0.000000
CUR_OI_ASTIME_WINDOW  =     0.000000
CUR_N_INFLU  = 0
CUR_NSTEP_OI  = 0

[namelist:NML_TS_NGASSIMILATION]
TS_NGASSIM  = F
TS_NGASSIM_FILE  = '${GRID_NAME}_ts.nc'
TS_NG_RADIUS  =     0.000000
TS_GAMA  =     0.000000
TS_GALPHA  =     0.000000
TS_NG_ASTIME_WINDOW  =     0.000000

[namelist:NML_TS_OIASSIMILATION]
TS_OIASSIM  = F
TS_OIASSIM_FILE  = '${GRID_NAME}_tsoi.nc'
TS_OI_RADIUS  =     0.000000
TS_OIGALPHA  =     0.000000
TS_OI_ASTIME_WINDOW  =     0.000000
TS_MAX_LAYER  = 0
TS_N_INFLU  = 0
TS_NSTEP_OI  = 0

